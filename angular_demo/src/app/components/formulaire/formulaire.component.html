<div class="category border m-2 p-4">
    <h1 class="display-4">New Formulaire</h1>
<form #form (submit)='saveFormulaire(form)' class="col-lg-8" action="javascript:void(0);" method="POST">
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="inputEmail4">First Name</label>
        <input type="text" class="form-control" name="prenom" required>
      </div>
      <div class="form-group col-md-6">
        <label for="inputPassword4">Last Name</label>
        <input type="text" class="form-control" name="nom" required>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="inputEmail4">Email</label>
        <input type="text" class="form-control" name="email" required >
      </div>
      <div class="form-group col-md-6">
        <label for="inputPassword4">Cin</label>
        <input type="text" class="form-control" name="cin" required >
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="inputEmail4">created by</label>
        <input type="text" class="form-control" name="creerPar" required>
      </div>
      <div class="form-group col-md-6">
        <label for="etape">Etape</label>
        <select id="etape" class="form-control" name="etape" required>
            <option >Choose ...</option>   
            <option *ngFor="let etape of etapes" value="{{etape.idEtape}}">{{etape.nom}} </option>   
        </select>
      </div>
    </div>
   
   
    
    <div class="mt-3">
        <button type="submit" class="btn btn-primary col-lg-3">Save Formulaire</button>
    </div>
  </form>
  <br>
  <br>
  <div *ngIf='error' class="alert alert-danger alert-dismissible fade show col-lg-3" role="alert">
    <strong>{{error}}</strong> 
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
<div *ngIf='success' class="alert alert-success alert-dismissible fade show col-lg-3" role="alert">
    <strong>{{success}}</strong> 
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  </div>
  <div class="form-group col-lg-3">
    <input type="text" class="form-control" placeholder="Search..." [(ngModel)]="filterTerm" autofocus>
  </div>
  <br>

  <table class="table table-hover">
    <thead style="background-color:slategray">
        <tr>
            <th>.Sno</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Cin</th>
            <th>created On</th>
            <th>created By </th>
            <th>Updated On </th>
            <th>Updated By </th>
            <th>Etape </th>
            
            <th colspan="3">Action</th>

        </tr>
    </thead>
    <tbody>
        <tr *ngFor='let form of formulaires | filter:filterTerm'>
            <td>{{form?.idFormulaire}} </td>
            <td>{{form?.prenom}} </td>
            <td>{{form?.nom}} </td>
            <td>{{form?.email}} </td>
            <td>{{form?.cin}} </td>
            <td>{{form?.dateCreation | date: 'MMM d, y, h:mm:ss a'}} </td>
            <td>{{form?.creerPar}} </td>
            <td>{{form?.dateModification | date: 'MMM d, y, h:mm:ss a'}} </td>
            <td>{{form?.modifierPar}} </td>
             <td>{{form?.etape?.nom}} </td> 
            
            <td></td>
            <td><button class="btn btn-success btn-sm" (click)='openModal(formModal,form)'  >Update Formulaire</button></td>
            <td><button class="btn btn-danger btn-sm" (click)='deleteFormulaire(form.idFormulaire)' >delete Formulaire</button></td>
        </tr>
    </tbody>

</table>


<ng-template #formModal>
  <div class="container-fluid">
      <form #formTemplate action="javascript:void(0);" (submit)='updateForm(formTemplate)' class="p-4 m-3" method="POST">
          <h1 class="display-6">Update Formulaire</h1>
          <hr>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputEmail4">First Name</label>
              <input type="text" class="form-control" name="prenom" value="{{selectedForm.nom}}">
            </div>
            <div class="form-group col-md-6">
              <label for="inputPassword4">Last Name</label>
              <input type="text" class="form-control" name="nom"value="{{selectedForm.prenom}}" >
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputEmail4">Email</label>
              <input type="text" class="form-control" name="email" value="{{selectedForm.email}}" >
            </div>
            <div class="form-group col-md-6">
              <label for="inputPassword4">Cin</label>
              <input type="text" class="form-control" name="cin" value="{{selectedForm.cin}}" >
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputEmail4">Updated by</label>
              <input type="text" class="form-control" name="modifierPar" value="{{selectedForm.modifierPar}}">
            </div>
            <div class="form-group col-md-6">
              <label for="etape">Etape</label>
              <select id="etape" class="form-control" name="etape" value="{{selectedForm.etape.nom}}" >
                  <option >Choose ...</option>   
                  <option *ngFor="let trans of transitions"  value="{{trans.etapeSuivante.idEtape}}">{{trans.etapeSuivante.nom}} </option>   
              </select>
            </div>
          </div>
         
         
          
          <div class=" mt-2">
              <button type="submit" class="btn btn-info col-md-6">Save Formulaire</button>
          </div>
      </form>


  </div>
</ng-template>